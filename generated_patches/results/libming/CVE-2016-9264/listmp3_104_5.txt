@@ -62,6 +62,7 @@
       return;
 }
 
+
 void printMP3Headers(FILE *f)
 {
   unsigned long flags;
@@ -102,6 +103,12 @@
     ++numFrames;
 
     bitrate_idx = (flags & MP3_BITRATE) >> MP3_BITRATE_SHIFT;
+
+    if (bitrate_idx == 0 || bitrate_idx == 0xF) {
+      error("unknown bitrate!");
+      break;
+    }
+
     samplerate_idx = (flags & MP3_SAMPLERATE) >> MP3_SAMPLERATE_SHIFT;
 
     channels = ((flags & MP3_CHANNEL) == MP3_CHANNEL_MONO) ? 1 : 2;
@@ -176,6 +183,7 @@
   printf("Length: %i:%02i\n", length/60, length%60);
 }
 
+
 int main(int argc, char *argv[])
 {
   FILE *f;
